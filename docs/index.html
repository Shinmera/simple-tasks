<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Simple Tasks</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.project #toc nav>*{margin-left:1em;display:block;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}@media (min-width: 1300px){html body{padding-left:16em;}article.project #toc{margin:0;position:fixed;left:0;top:0;bottom:0;width:15em;overflow-y:auto;background:#F0F0F0;border-right:1px solid #A0A0A0;}}</style> </head> <body> <article class="project"> <header>   <h1>simple tasks</h1>   <span class="version">1.3.0</span>    <p class="description">A very simple task scheduling framework.</p>   </header> <section id="toc"> <h2>Table of Contents</h2> <nav> <a href="#project">Top</a>  <a href="#documentation">Documentation</a> <nav> <a href="#about_simple-tasks">About simple-tasks</a>  <a href="#basic_usage">Basic Usage</a>  <a href="#extending_simple-tasks">Extending simple-tasks</a>  <a href="#also_see">Also See</a> </nav>  <a href="#system">System</a>  <a href="#system">Packages</a> <nav> <a href="#PACKAGE%20SIMPLE-TASKS">SIMPLE-TASKS</a> </nav>  </nav> </section>  <section id="documentation"><h2 id="about_simple-tasks">About simple-tasks</h2> <p>Recently I noticed that I seem to write a similar pattern way too often: Some form of scheduling or task management part.
Usually this is due to the need of executing some task in a specific thread, or simply wanting to schedule something for processing in the background.</p> <h2 id="basic_usage">Basic Usage</h2> <p>Load it through ASDF or Quicklisp:</p> <pre><code>(ql:quickload :simple-tasks)
</code></pre> <p>Before we can do anything, we need to have a manager to run tasks with. These are called <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUNNER" class="xref">runner</a></code>s. Usually you will want a <code><a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER" class="xref">queued-runner</a></code> which will use threading capabilities if the system provides them, and thus can process tasks in the background.</p> <pre><code>(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *runner* (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> <a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER" class="xref">'simple-tasks:queued-runner</a>))
</code></pre> <p>Next we'll want to start the runner, if possible in a separate thread. The standard <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTART-RUNNER" class="xref">start-runner</a></code> function does not do this, as you might want to set up the thread scenario yourself, or perhaps even inject the runner into a different thread. However, for the common scenario, there's <code><a href="#FUNCTION%20SIMPLE-TASKS%3AMAKE-RUNNER-THREAD" class="xref">make-runner-thread</a></code>.</p> <pre><code>(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *thread* (<a href="#FUNCTION%20SIMPLE-TASKS%3AMAKE-RUNNER-THREAD" class="xref">simple-tasks:make-runner-thread</a> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A" class="xref">*runner*</a>))
</code></pre> <p>Now we can finally create <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK" class="xref">task</a></code>s and send them off for processing! Out of the box, simple-tasks provides three classes to do remote evaluation with: <code><a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">call-task</a></code>, <code><a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-CALL-TASK" class="xref">blocking-call-task</a></code>, and <code><a href="#CLASS%20SIMPLE-TASKS%3ACALLBACK-TASK" class="xref">callback-task</a></code>. However, adding your own is very easy. Just subclass <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK" class="xref">task</a></code> and implement <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUN-TASK" class="xref">run-task</a></code>.</p> <pre><code>(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *task* (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">'simple-tasks:call-task</a> :func (lambda () (<a href="http://l1sp.org/cl/print" class="xref">print</a> &quot;hi&quot;))))
</code></pre> <p>Finally we need to send off the task for processing.</p> <pre><code>(<a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">simple-tasks:schedule-task</a> *task* <a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A" class="xref">*runner*</a>)
</code></pre> <p>All <code><a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">call-task</a></code>s also save the <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARETURN-VALUES" class="xref">return-values</a></code> of the function they're calling, so you can read that out later. Usually if you want to do so, you'll want to either block until the task is done, or delegate to a callback function. The former is made convenient through <code><a href="#MACRO-FUNCTION%20SIMPLE-TASKS%3AWITH-BODY-AS-TASK" class="xref">with-body-as-task</a></code>.</p> <pre><code><a href="#FUNCTION%20SIMPLE-TASKS%3ACALL-AS-TASK" class="xref">(</a><a href="#MACRO-FUNCTION%20SIMPLE-TASKS%3AWITH-BODY-AS-TASK" class="xref">simple-tasks:with-body-as-task</a> (<a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A" class="xref">*runner*</a>)
  (<a href="http://l1sp.org/cl/sleep" class="xref">sleep</a> 1)
  (<a href="http://l1sp.org/cl/expt" class="xref">expt</a> 2 12))
</code></pre> <p>In the case that a task encounters a failure during a run, it sets its status to <code>:errored</code> and saves the current environment. You can inspect this environment at any later point by fetching it with <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AERROR-ENVIRONMENT" class="xref">error-environment</a></code> and looking at its contents with the various functions Dissect provides. This is mostly useful in a scenario where you cannot use a debugger and thus just automatically invoke the <code>skip</code> restart in the runner thread. With the environment saved, the error can still be inspected elsewhere or at a later date.</p> <pre><code>(<a href="https://Shinmera.github.io/dissect/#FUNCTION%20DISSECT%3APRESENT" class="xref">dissect:present</a>
  (<a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AERROR-ENVIRONMENT" class="xref">simple-tasks:error-environment</a>
    (<a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">simple-tasks:schedule-task</a> 
      (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-CALL-TASK" class="xref">'simple-tasks:blocking-call-task</a> :func (lambda () (<a href="http://l1sp.org/cl/error" class="xref">error</a> &quot;Hi&quot;))) <a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A" class="xref">*runner*</a>)))
</code></pre> <p>And that's pretty much it.</p> <pre><code>(<a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTOP-RUNNER" class="xref">simple-tasks:stop-runner</a> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A" class="xref">*runner*</a>)
</code></pre> <h2 id="extending_simple-tasks">Extending simple-tasks</h2> <p>If you want to add flexibility by creating your own specialised task classes, you should look at <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK" class="xref">task</a></code>, <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUN-TASK" class="xref">run-task</a></code>, and <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">schedule-task</a></code>. Usually you can get away by just subclassing <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK" class="xref">task</a></code>, and adding a <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUN-TASK" class="xref">run-task</a></code> method to do your calculations in. If you also need to modify the behaviour of the scheduling, adding <code>:after</code> methods to <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">schedule-task</a></code> can also be useful.</p> <p>In case that the existing runners aren't suited to your needs, adding one should also not be much of a problem. Simply subclass <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUNNER" class="xref">runner</a></code>, and implement appropriate methods for <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTART-RUNNER" class="xref">start-runner</a></code>, <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTOP-RUNNER" class="xref">stop-runner</a></code>, and <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">schedule-task</a></code>. The existing methods on <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUNNER" class="xref">runner</a></code> will take care of keeping the <code><a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTATUS" class="xref">status</a></code> in sync and making sure no invalid calls can be made.</p> <h2 id="also_see">Also See</h2> <ul> <li><a href="https://shinmera.github.io/dissect">Dissect</a> for error environment capture and inspection.</li> </ul> </section>    <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.3.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external">bordeaux-threads</a></li><li><a class="external" href="https://Shinmera.github.io/array-utils/">array-utils</a></li><li><a class="external" href="https://Shinmera.github.io/dissect/">dissect</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://Shinmera.github.io/simple-tasks/">https://Shinmera.github.io/simple-tasks/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/Shinmera/simple-tasks/issues">https://github.com/Shinmera/simple-tasks/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/Shinmera/simple-tasks.git">https://github.com/Shinmera/simple-tasks.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE SIMPLE-TASKS"> <header> <h3> <a href="#PACKAGE%20SIMPLE-TASKS">SIMPLE-TASKS</a> </h3> <ul class="nicknames"> <li>ORG.SHIRAKUMO.SIMPLE-TASKS</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE SIMPLE-TASKS:*RUNNER*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2ARUNNER%2A">*RUNNER*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L22">Source</a>  </header> <div class="docstring"><pre>Bound to the current runner if within a runner context.
Otherwise, set to NIL. Useful to detect if a task is run in
a particular runner to avoid conflicts.</pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE SIMPLE-TASKS:+NO-THREADING-STUMP+"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2BNO-THREADING-STUMP%2B">+NO-THREADING-STUMP+</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/toolkit.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Constant to hold an instance of NO-THREADING-STUMP.</pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE SIMPLE-TASKS:+STATUS-ENDED+"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2BSTATUS-ENDED%2B">+STATUS-ENDED+</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Constant matching any ended (not necessarily successful) status.

:STOPPING    Object is in the process of being stopped.
:STOPPED     Object has been stopped.
:COMPLETED   Object successfully completed execution.
:ERRORED     Object ended execution with an error.</pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE SIMPLE-TASKS:+STATUS-RUNNING+"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2BSTATUS-RUNNING%2B">+STATUS-RUNNING+</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L4">Source</a>  </header> <div class="docstring"><pre>Constant matching a running status.

:RUNNING     Object is currently executing.</pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE SIMPLE-TASKS:+STATUS-STARTED+"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-TASKS%3A%2BSTATUS-STARTED%2B">+STATUS-STARTED+</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Constant matching any started (not necessarily running) status.

:CREATED     Object has been initialized, but not started.
:SCHEDULED   Object has been scheduled for execution.
:RUNNING     Object is currently executing.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:BLOCKING-CALL-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-CALL-TASK">BLOCKING-CALL-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L140">Source</a>  </header> <div class="docstring"><pre>Task class to perform a function call once run.
Blocks the scheduling thread until it is done.

See <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">CALL-TASK</a>
See <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-TASK" class="xref">BLOCKING-TASK</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:BLOCKING-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-TASK">BLOCKING-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L109">Source</a>  </header> <div class="docstring"><pre>A task that will block after being scheduled until it is done or interrupted.

When SCHEDULE-TASK is called on this, it establishes two restarts:
ABORT    to forcibly abort (interrupt) the task.
UNBLOCK  to resume execution in the current thread and leave the task running.

If a restart or similar exit functionality is invoked that leaves the scope of
SCHEDULE-TASK, the task is interrupted.

Note that the restarts are not useful on systems without thread support. In such
a case the task will be interrupted either way, due to the very nature of running
in the current thread.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AAWAIT" class="xref">AWAIT</a>
See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AINTERRUPT-TASK" class="xref">INTERRUPT-TASK</a>
See <a href="#CLASS%20SIMPLE-TASKS%3ANOTIFYING-TASK" class="xref">NOTIFYING-TASK</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:CALL-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK">CALL-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L71">Source</a>  </header> <div class="docstring"><pre>Task class to perform a function call once run. Stores the return values.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:CALLBACK-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ACALLBACK-TASK">CALLBACK-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L157">Source</a>  </header> <div class="docstring"><pre>Task class to perform a function call once run and call a callback upon completion.

If the task completes successfully, the callback function is called with each return
value as an argument. Note that the callback function is called within the runner
environment which may be different from the scheduler environment.

See <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">CALL-TASK</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:NO-THREADING-STUMP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ANO-THREADING-STUMP">NO-THREADING-STUMP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/toolkit.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Stump class to stand in place of a value on systems without threading support.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:NOTIFYING-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ANOTIFYING-TASK">NOTIFYING-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L88">Source</a>  </header> <div class="docstring"><pre>A task that will notify a condition upon completion.

This is particularly useful in conjunction with AWAIT.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:QUEUED-RUNNER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER">QUEUED-RUNNER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L67">Source</a>  </header> <div class="docstring"><pre>Queued runner. Runs tasks in a thread if threading is available.
Noe that START-RUNNER for this runner will block the current thread.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:RUNNER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ARUNNER">RUNNER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Basic runner. Runs task as soon as scheduled.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:STATUS-OBJECT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ASTATUS-OBJECT">STATUS-OBJECT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L10">Source</a>  </header> <div class="docstring"><pre>A class that has a status.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS SIMPLE-TASKS:TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20SIMPLE-TASKS%3ATASK">TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L22">Source</a>  </header> <div class="docstring"><pre>Basic task class.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:RUNNER-CONDITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ARUNNER-CONDITION">RUNNER-CONDITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Condition superclass for conditions related to runner operations.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:RUNNER-NOT-STARTED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ARUNNER-NOT-STARTED">RUNNER-NOT-STARTED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L7">Source</a>  </header> <div class="docstring"><pre>Condition signalled when the runner is not yet started, but has to be.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:RUNNER-NOT-STOPPED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ARUNNER-NOT-STOPPED">RUNNER-NOT-STOPPED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L11">Source</a>  </header> <div class="docstring"><pre>Condition signalled when the runner did not stop properly.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:TASK-ALREADY-SCHEDULED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ATASK-ALREADY-SCHEDULED">TASK-ALREADY-SCHEDULED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Condition signalled when attempting to reschedule an already scheduled task.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:TASK-CONDITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ATASK-CONDITION">TASK-CONDITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Condition superclass for task operation related conditions.</pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-TASKS:TASK-ERRORED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-TASKS%3ATASK-ERRORED">TASK-ERRORED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Condition signalled when a task failed to run properly.</pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE SIMPLE-TASKS:STATUS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20SIMPLE-TASKS%3ASTATUS">STATUS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L16">Source</a>  </header> <div class="docstring"><pre>A status can be a SYMBOL, a STATUS-OBJECT, or a LIST composed of SYMBOLs.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-TASKS:ABORT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-TASKS%3AABORT">ABORT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Transfer control to a restart named ABORT, signalling a CONTROL-ERROR if
   none exists.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-TASKS:CALL-AS-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-TASKS%3ACALL-AS-TASK">CALL-AS-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FUNCTION</li>    <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">TASK-CLASS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L143">Source</a>  </header> <div class="docstring"><pre>Call function within a task, usually a BLOCKING-CALL-TASK.
Depending on the task's STATUS after SCHEDULE-TASK returns, the following happens.
  :COMPLETED  The task's return values are returned.
  :ERRORED    A condition of type TASK-ERRORED is signalled.
  T           The task is returned.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK" class="xref">SCHEDULE-TASK</a>
See <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-CALL-TASK" class="xref">BLOCKING-CALL-TASK</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-TASKS:MAKE-RUNNER-THREAD"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-TASKS%3AMAKE-RUNNER-THREAD">MAKE-RUNNER-THREAD</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L155">Source</a>  </header> <div class="docstring"><pre>Make a thread to call START-RUNNER on RUNNER in.

On platforms with thread support, this returns the new thread.
On platforms without, this simply calls START-RUNNER and returns NIL.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTART-RUNNER" class="xref">START-RUNNER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:AWAIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AAWAIT">AWAIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument">STATUS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L20">Source</a>  </header> <div class="docstring"><pre>Wait for the TASK to match a certain STATUS.

On systems without thread support this does nothing.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTATUS%3D" class="xref">STATUS=</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:BACK-QUEUE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ABACK-QUEUE">BACK-QUEUE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L62">Source</a>  </header> <div class="docstring"><pre>The current back-queue of the runner.

Used to swap with QUEUE when events are handled.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AQUEUE" class="xref">QUEUE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:CALLBACK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ACALLBACK">CALLBACK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CALLBACK-TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L155">Source</a>  </header> <div class="docstring"><pre>The function to call upon completion of the task.

See <a href="#CLASS%20SIMPLE-TASKS%3ACALLBACK-TASK" class="xref">CALLBACK-TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF CALLBACK)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20CALLBACK%29">(SETF CALLBACK)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:CVAR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ACVAR">CVAR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L64">Source</a>  </header> <div class="docstring"><pre>The condition variable used to exchange signals.

See <a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER" class="xref">QUEUED-RUNNER</a>
See <a href="#CLASS%20SIMPLE-TASKS%3ABLOCKING-CALL-TASK" class="xref">BLOCKING-CALL-TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF CVAR)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20CVAR%29">(SETF CVAR)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:ERROR-ENVIRONMENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AERROR-ENVIRONMENT">ERROR-ENVIRONMENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L19">Source</a>  </header> <div class="docstring"><pre>An environment object that is stored in case the task fails to run properly.

See <a href="https://Shinmera.github.io/dissect/#CLASS%20DISSECT%3AENVIRONMENT" class="xref">DISSECT:ENVIRONMENT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF ERROR-ENVIRONMENT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20ERROR-ENVIRONMENT%29">(SETF ERROR-ENVIRONMENT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:FUNC"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AFUNC">FUNC</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CALL-TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L68">Source</a>  </header> <div class="docstring"><pre>The function the call-task calls once it is run.

See <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">CALL-TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF FUNC)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20FUNC%29">(SETF FUNC)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:INTERRUPT-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AINTERRUPT-TASK">INTERRUPT-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L19">Source</a>  </header> <div class="docstring"><pre>Interrupt the TASK to stop it from execution on RUNNER.

If the task is currently on the RUNNER's queue to be executed (:SCHEDULED), it
is removed from the queue. If the task is currently running, it is forcibly
aborted. In either case, the task's status is changed to :STOPPED and it 
will not execute further. On systems without thread support this does nothing.

If this is called with the RUNNER being T, the current runner of the TASK
is used, if possible. If this is called with the RUNNER being NIL, the
actual termination mechanism for the task is performed, leading it to be
terminated.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:LOCK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ALOCK">LOCK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L63">Source</a>  </header> <div class="docstring"><pre>The lock used to coordinate task scheduling with the runner.

See <a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER" class="xref">QUEUED-RUNNER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF LOCK)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20LOCK%29">(SETF LOCK)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:QUEUE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3AQUEUE">QUEUE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L61">Source</a>  </header> <div class="docstring"><pre>The current task queue of the runner.

Do not directly push tasks to this! Use SCHEDULE-TASK instead.
This queue is also NOT indicative of which tasks have yet to be run,
or which ones have. When the queued runner runs, it retains the current
queue for processing and sets a new, empty queue on the runner. As such,
when you look at the queue at any particular moment, tasks that are not
in it might not have run yet.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:RETURN-VALUES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARETURN-VALUES">RETURN-VALUES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CALL-TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L69">Source</a>  </header> <div class="docstring"><pre>Returns the values that the call returned.

See <a href="#CLASS%20SIMPLE-TASKS%3ACALL-TASK" class="xref">CALL-TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF RETURN-VALUES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20RETURN-VALUES%29">(SETF RETURN-VALUES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:RUN-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUN-TASK">RUN-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Run the given task object directly.

One restart is established:
STOP    to forcibly stop (interrupt) the task. Assigns the :STOPPED status.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:RUNNER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUNNER">RUNNER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L18">Source</a>  </header> <div class="docstring"><pre>The runner the task is scheduled on.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK" class="xref">TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF RUNNER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20RUNNER%29">(SETF RUNNER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:SCHEDULE-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASCHEDULE-TASK">SCHEDULE-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L17">Source</a>  </header> <div class="docstring"><pre>Schedule the task object for running.
The task may or may not be run immediately, depending on the runner and given
system support. Tasks are guaranteed to be run in the same order as they are
scheduled.

See <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ARUN-TASK" class="xref">RUN-TASK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:START-RUNNER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTART-RUNNER">START-RUNNER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L15">Source</a>  </header> <div class="docstring"><pre>Start the the runner.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:STATUS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTATUS">STATUS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STATUS-OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L7">Source</a>  </header> <div class="docstring"><pre>Current status indicator of the status-object.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF STATUS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20STATUS%29">(SETF STATUS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:STATUS="> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTATUS%3D">STATUS=</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">A</li>    <li class="argument">B</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/status.lisp#L8">Source</a>  </header> <div class="docstring"><pre>Compare two statuses with each other (commutative).</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:STOP-RUNNER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ASTOP-RUNNER">STOP-RUNNER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RUNNER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L16">Source</a>  </header> <div class="docstring"><pre>Stop the the runner.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK">TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK-CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L3">Source</a>  </header> <div class="docstring"><pre>The task related to the condition.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:(SETF TASK)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3A%28SETF%20TASK%29">(SETF TASK)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:TASK-READY-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATASK-READY-P">TASK-READY-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TASK</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L17">Source</a>  </header> <div class="docstring"><pre>Returns T if the task is ready to be run.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-TASKS:THREAD"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-TASKS%3ATHREAD">THREAD</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/runner.lisp#L65">Source</a>  </header> <div class="docstring"><pre>Returns the current thread associated with the queued-runner if any.

See <a href="#CLASS%20SIMPLE-TASKS%3AQUEUED-RUNNER" class="xref">QUEUED-RUNNER</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION SIMPLE-TASKS:WITH-BODY-AS-TASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20SIMPLE-TASKS%3AWITH-BODY-AS-TASK">WITH-BODY-AS-TASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">RUNNER</li>  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>  <li class="argument">TASK-CLASS</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-tasks/blob/918553cb89ba8d4ef085c976a58167fd7ae04629/task.lisp#L151">Source</a>  </header> <div class="docstring"><pre>Evaluate BODY within a task, usually a BLOCKING-CALL-TASK.

See <a href="#FUNCTION%20SIMPLE-TASKS%3ACALL-AS-TASK" class="xref">CALL-AS-TASK</a></pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 